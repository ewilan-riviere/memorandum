---
title: "Setup"
description: "Additional steps to setup a VPS on Linux"
position: 2
category: "vps"
---

# Setup

::alert{type="warning"}
When I offer to create new user, I call it `jack`, you can use any other username.
::

## SSH

If it's setup of server, you have to disable ssh with root and allow it with a custom user.

**First time connection**

```bash
ssh root@xxx.xx.xx.xxx
```

**Check IP**

```bash
/sbin/ip -4 addr
/sbin/ip -6 addr
```

**Update Linux and add new user**

```bash
apt update
apt upgrade
adduser jack
usermod -aG sudo jack
```

**Enable firewall**

```bash
sudo apt install -y ufw vim
sudo ufw app list
sudo ufw allow OpenSSH
sudo ufw enable
sudo ufw status
```

### Copy SSH keys from _root_ to _jack_

```bash
mkdir /home/jack/.ssh/
cp /root/.ssh/authorized_keys /home/jack/.ssh/
chown -R jack:jack /home/jack/.ssh/
chmod -R 700 /home/jack/.ssh/
```

Exit SSH connection

```bash
exit
```

Connect to server with new user

```bash
ssh jack@xxx.xx.xx.xxx
```

**If works**, disallow ssh connection with root.

```bash
sudo vim /etc/ssh/sshd_config
```

Find `PermitRootLogin` line and replace `yes` to `no` and restart sshd daemon. Disconnect yourself with `exit` and you won't able to connect with `root`, connect with custom user now.

```diff[/etc/ssh/sshd_config]
-PermitRootLogin yes
+PermitRootLogin no
```

```bash
sudo systemctl restart sshd.service
```

### Change root password

```bash
sudo -i
```

```bash
passwd
```

```bash
exit
```
